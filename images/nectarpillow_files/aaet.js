"use strict";!function(e,o,r,t){var s={CDN:"origin.acuityplatform.com",AD_SERVER:"https://acuityplatform.com/Adserver/pxlj",EV_SERVER:"https://e.acuityplatform.com/pj"},d={SiteVisit:"visit",Conversion:"conversion"};var u=function(){for(var e=o.getElementsByTagName("script"),r=0;r<e.length;r++)if(e[r]&&e[r].src&&-1!==e[r].src.indexOf(s.CDN))return e[r];return null}(),l=function(){var e=window,r=!1;try{for(;e.parent.document!==e.document;){if(!e.parent.document){r=!0;break}e=e.parent}}catch(e){r=!0}return{topFrame:e,err:r}},c=function(e){var r=e.err,t=e.topFrame,i="";if(r)try{i=window.top.location.href}catch(e){i=window.location.href}else i=t.location.href;return i};function p(e){u&&u.parentNode?u.parentNode.insertBefore(e,u):o.head&&o.head.firstChild&&o.head.appendChild(e)}function v(e,r){var t=[];for(var i in null!==aaet.version&&""!==aaet.version&&void 0!==aaet.version&&t.push("scver="+aaet.version),null!==aaet.scid&&""!==aaet.scid&&void 0!==aaet.scid&&t.push("scid="+aaet.scid),null!==aaet.loaded&&""!==aaet.loaded&&void 0!==aaet.loaded&&t.push("cb="+aaet.loaded),e)if(e.hasOwnProperty(i)){var n=r[i];null!=n&&""!==n&&(n.constructor===Array&&(n=n.join("~")),t.push(e[i].queryParameter+"="+encodeURIComponent(n)))}return t}function f(e,r){var t,i,n;if(null!=r)switch(r.type){case d.SiteVisit:!function(e,r){var t=[];t.push("pk="+e);var i=v(h,r),n=c(l());""!==n&&i.push("pu="+encodeURIComponent(n));var a=o.createElement("script");a.async=!0,a.src=s.EV_SERVER+"?"+t.concat(i).join("&"),p(a)}(e,r);break;case d.Conversion:t=e,i=r,(n=o.createElement("script")).async=!0,n.src=s.AD_SERVER+"/"+t+"?"+v(g,i).join("&"),p(n)}}var y={validate:function(r,e){var t=this;return e.every(function(e){return t[e](r)})},isString:function(e){return"string"==typeof e},isNotEmpty:function(e){return""!==e&&null!=e},isInt:function(e){return Number.isInteger(e)},isNumber:function(e){return null!==e&&"undefined"!==e&&"number"==typeof e&&!isNaN(e)},isNotEmptyArray:function(e){return null!==e&&"undefined"!==e&&(Array.isArray?Array.isArray(e)&&0!==e.length:e instanceof Array&&0!==e.length)},isArrayOfStrings:function(e){for(var r=0;r<e.length;r++)if(!this.isString(e[r]))return!1;return!0},getValidValue:function(e,r){if(y.validate(e,r.validator))return e;if(r.required)throw new TypeError("value is not set for a required field: "+r.desc+" ,validator: "+JSON.stringify(r));return r.value}},h={pageId:{required:0,validator:["isInt"],value:0,queryParameter:"pg",desc:"The page ID to distinguish between different site visits"}},g={revenue:{required:0,validator:["isNumber"],value:null,queryParameter:"crev",desc:"Shoppint cart value, and will be used for reporting"},orderId:{required:0,validator:["isNotEmpty","isString"],value:null,queryParameter:"ordid",desc:"Unique order id and will be used for reporting"},productId:{required:0,validator:["isNotEmptyArray","isArrayOfStrings"],value:null,queryParameter:"prodid",desc:"Different productIDs and will be used for reporting"}},m={type:{validator:["isNotEmpty","isString"]},validate:function(e){return y.validate(e.type,this.type.validator)},create:function(e){if(!this.validate(e))return console.error("AcuityAds Pixel: invalid event to track, "+JSON.stringify(e)),null;switch(e.type){case d.SiteVisit:return a=e.pageId,{type:d.SiteVisit,pageId:y.getValidValue(a,h.pageId)};case d.Conversion:return t=(r=e).revenue,i=r.orderId,n=r.productId,{type:d.Conversion,revenue:y.getValidValue(t,g.revenue),orderId:y.getValidValue(i,g.orderId),productId:y.getValidValue(n,g.productId)};default:return console.error("AcuityAds Pixel: invalid event type, "+JSON.stringify(e)),null}var r,t,i,n,a}},A={pKey:{validator:["isNotEmpty","isString"]},events:{validator:["isNotEmptyArray"]},validate:function(e){if(!y.validate(e.pKey,this.pKey.validator))throw new TypeError("Event Tracker is not defined properly, the pixel key is not defined");if(!y.validate(e.events,this.events.validator))throw new TypeError("Event Tracker is not defined properly, events are not defined");if(1<e.events.filter(function(e){return e.type===d.Conversion}).length)throw new TypeError("Event Tracker is not defined properly, more than one conversion assigned to the pixel");if(1<e.events.filter(function(e){return e.type===d.SiteVisit}).length)throw new TypeError("Event Tracker is not defined properly, more than one site visit assigned to the pixel");return!0}};!function(){if(null!=u)if("undefined"!=typeof aaet&&aaet&&aaet.queue&&0!=aaet.queue.length){var e=aaet.queue.reduce(function(e,r){return e[r.pKey]?e[r.pKey]=e[r.pKey]+1:e[r.pKey]=1,e},{});try{for(var r=0;r<aaet.queue.length;r++){var t=aaet.queue[r];if(!A.validate(t))return console.error("AcuityAds pixel error, event tracker is not valid: "+JSON.stringify(t));var i=t.pKey;if(1<e[i])return console.error("AcuityAds pixel error, event tracker is not valid, pixel key is used before, pixel key: "+i);for(var n=t.events,a=0;a<n.length;a++)try{f(i,m.create(n[a]))}catch(e){console.error("AcuityAds, error in adding pixel, "+e)}}}catch(e){console.error("AcuityAds Pixel, "+e)}}else console.error("AcuityAds, error in inserting pixel, event trackers are not defined");else console.error("AcuityAds, error in inserting pixel")}()}(window,document,location,history);
